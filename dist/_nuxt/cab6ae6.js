(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{267:function(t,e,o){"use strict";o.r(e);o(37),o(31),o(38);var n=o(26),l=o(46),r=o(39);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var d={middleware:["auth-user"],data:function(){return{users:[],followUser:{},flag_id:0}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({currentUser:function(){return this.$store.state.auth.user}},Object(l.b)({following:"user/following"})),methods:{confirmFollow:function(t){this.followUser=t,$("#follow-user").modal("show")},follow:function(){var t=this;t.$nuxt.$loading.start();var e=this.currentUser,data={flag_id:[{target_id:"following"}],entity_type:[{value:"user"}],global:[{value:!1}],entity_id:[{value:this.followUser.uid}],uid:[{target_id:e.uid}]};r.a.createResource("POST","/entity/flagging",data).then((function(e){t.notifyResponse("You have started following: "+t.followUser.name),t.$nuxt.$loading.finish(),t.followUser={},t.$store.dispatch("user/getFollowers",e.uid[0].target_id),t.$store.dispatch("user/getFollowing",e.uid[0].target_id),$("#follow-user").modal("hide")})).catch((function(e){t.$nuxt.$loading.finish(),t.notifyResponse("Something went wrong, Please try again!!","error"),$("#follow-user").modal("hide")}))},confirmUnfollow:function(t){this.flag_id=t,$("#unfollow-user").modal("show")},unfollow:function(){var t=this;t.$nuxt.$loading.start();this.currentUser;r.a.deleteResource("DELETE","/entity/flagging",+t.flag_id).then((function(e){var o=t.currentUser;t.notifyResponse("You have unfollowed this user"),t.$nuxt.$loading.finish(),t.$store.dispatch("user/getFollowers",o.uid),t.$store.dispatch("user/getFollowing",o.uid),$("#unfollow-user").modal("hide")})).catch((function(e){t.$nuxt.$loading.finish(),t.notifyResponse("Something went wrong, Please try again!!","error"),$("#unfollow-user").modal("hide")}))},checkFollowing:function(t){var e=this.following,o=!1,n=0;return e.forEach((function(element){element.uid===t.uid&&(o=!0,n=element.id)})),o?n:o},notifyResponse:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e3;this.$swal({type:e,title:t,showConfirmButton:!1,timer:o})}},mounted:function(){var t=this;this.$nuxt.$loading.start(),r.a.getResources("GET","/api/user/list").then((function(e){t.users=e,t.$nuxt.$loading.finish()})).catch((function(e){t.$nuxt.$loading.finish()}));var e=this.currentUser;this.$store.dispatch("user/getFollowing",e.uid)}},f=o(13),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"row justify-content-center"},[o("div",{staticClass:"col-md-8 col-md-offset-2 mt-lg mb-xl",attrs:{id:"new-post"}},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-header"},[t._v("Users")]),t._v(" "),o("div",{staticClass:"table-responsive"},[o("table",{staticClass:"table"},[t._m(0),t._v(" "),o("tbody",[0==t.users.length?o("tr",[o("td",{attrs:{colspan:"3"}},[t._v("No users found!!")])]):t._e(),t._v(" "),t._l(t.users,(function(e,n){return o("tr",{key:e.uid},[e.uid!=t.currentUser.uid?[o("td",[t._v(t._s(n+1))]),t._v(" "),o("td",[t._v(t._s(e.name))]),t._v(" "),o("td",[0!=t.checkFollowing(e)?[o("a",{attrs:{href:"#"},on:{click:function(o){o.preventDefault(),t.confirmUnfollow(t.checkFollowing(e))}}},[t._v("UnFollow ")])]:[o("a",{attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.confirmFollow(e)}}},[t._v("Follow")])]],2)]:t._e()],2)}))],2)])])])]),t._v(" "),o("div",{staticClass:"modal fade",attrs:{id:"follow-user",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel"}},[o("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),t.followUser.name?o("div",{staticClass:"modal-body"},[t._v("\n                    Are you sure you wanna follow  "+t._s(t.followUser.name)+" ?\n                ")]):t._e(),t._v(" "),o("div",{staticClass:"modal-footer"},[o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[t._v("No")]),t._v(" "),o("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.follow(e)}}},[t._v("Yes")])])])])])]),t._v(" "),o("div",{staticClass:"modal fade",attrs:{id:"unfollow-user",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel"}},[o("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),o("div",{staticClass:"modal-body"},[t._v("\n                    Are you sure you wanna unfollow this user ?\n                ")]),t._v(" "),o("div",{staticClass:"modal-footer"},[o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[t._v("No")]),t._v(" "),o("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.unfollow(e)}}},[t._v("Yes")])])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("#")]),this._v(" "),e("th",[this._v("Name")]),this._v(" "),e("th",[this._v("Actions")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[this._v("Follow")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[this._v("Unfollow")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[this._v("×")])])}],!1,null,null,null);e.default=component.exports}}]);